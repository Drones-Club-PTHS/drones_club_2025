# Блок 11. Цвета. (Заметки OpenCV)

## Функция `inRange()`

Функция `inRange()` проверяет лежат ли элементы массива в заданном диапазоне. На выходе мы получаем массив, совпадающий по размерам с исходным изображением, в котором на месте каждого пикселя находится либо 0 (все биты числа = 0), либо 255 (все биты числа = 1). Если у изображения несколько каналов, то 255 будет только в том случае, если в нужные диапазоны попали все каналы данного пикселя.

[Документация `inRange()`](https://docs.opencv.org/4.x/d2/de8/group__core__array.html#ga48af0ab51e36436c5d04340e036ce981)

Пример:
```python
# cv2.inRange(image, lower_boundary, upper_boundary)
mask = cv2.inRange(bgr_image, [0, 100, 0], [255, 200, 255])
# Вернёт маску, у которой 255 будет там, где зелёный канал пикселя попал в диапазон [100, 200]
```

## Функция `bitwise_and()`

Функция `bitwise_and()` делает побитовое И для всех пикселей.
```python
new_image = cv2.bitwise_and(image1, image2, mask=image_mask)
```
Вернёт массив, каждый элемент которого является побитовым И элементов массивов image1 и image2. Опциональный аргумент `mask` примает массив, сдержащий значения `0` или `255`. Для пикселей, для каторых значение в `mask` -- `255`, будет выполнено побитовое И и записано в результирующий массив, а для пикселей, для которых значение в `mask` -- `0`, побитовое И выполняться не будет и в результирующем массиве будет записано значение `0`.

[Документация `bitwise_and()`](https://docs.opencv.org/4.x/d2/de8/group__core__array.html#ga60b4d04b251ba5eb1392c34425497e14)

Пример применения маски:
```python
mask # Массив, содержащий значения 0 и 255
masked_image = cv2.bitwise_and(image, image, mask=mask)
# Применяем bitwise_and для изображения с самим собой (что вернёт нам исходное изображение)
# Но маска сделает нулевыми те пиксели, которые в маске помечены как 0
```
