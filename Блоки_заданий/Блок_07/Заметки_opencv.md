# Блок 7. Заметки. OpenCV.

[Документация OpenCV](https://docs.opencv.org/4.x/index.html)
[OpenCV-Python Tutorials](https://docs.opencv.org/4.x/d6/d00/tutorial_py_root.html)

### Чтение из файла
```python
image = cv2.imread("path/to/your/image.jpg")
```
[Документация `imread()`](https://docs.opencv.org/4.x/d4/da8/group__imgcodecs.html#gaffb68fce322c6e52841d7d9357b9ad2d)

### Запись в файл
```python
cv2.imwrite("filename.jpg", image)
```
[Документация `imwrite()`](https://docs.opencv.org/4.x/d4/da8/group__imgcodecs.html#gabbc7ef1aa2edfaa87772f1202d67e0ce)


### Вывод картинки на экран
```python
cv2.imshow("Window name", image)
```
[Документация `imshow()`](https://docs.opencv.org/4.x/d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563)

Функция `imshow()` открывает новое окно с изображением.\
Если ещё раз вызвать функцию `imshow()` с тем же именем окна, то вместо открывания нового окна будет обновлена картинка в уже имеющемся.\
Когда программа заканчивается все открытые окна автоматически закрываются.

[Документация `imshow()`](https://docs.opencv.org/4.x/d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563)

Для закрытия всех открытых окон можно использовать функцию `cv2.destroyAllWindows()`.
 
### Получение изображения с камеры компьютера
```python
cap = cv2.VideoCapture(0)
ret, frame = cap.read() # frame - изображение с камеры
# DO SOMETHING
cap.release()
```
`VideoCapture` захватывает поток данных с камеры компьютера. Пока поток захвачен никакая другая программа на вашем компьютере не сможет получить доступ к камере.\
Изменяя число в аргументе у `VideoCapture` можно выбрать нужное устройство, если у вас подключено несколько камер.\
`release()` отпускает поток данных.


### Ожидание нажатия клавиши
```python
cv2.waitKey(0) # Ждать, пока какая-нибудь клавиша не будет нажата
key = cv2.waitKey(delay) # delay - время ожидания в миллисекундах
```
Функция `waitKey()` ожидает нажатия клавиши на клавиатуре. Но клавиша задетектируется только если окно OpenCV с изображением находится в фокусе. В аргументе `delay` можно указать время ожидания (в миллисекундах), если за это время клавиша так и не будет нажата, то функция вернёт `-1` и завершится, а если клавиша нажата то вернёт код нажатой клавиша (его можно записать в переменную для последующей проверки). Аргумент `delay` равный нулю означает "бесконечное ожидание", то есть ждём пока какая-нибудь клавиша таки не будет нажата.

[Документация `waitKey()`](https://docs.opencv.org/4.x/d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7)

### Проверка кода нажатой клавиши
```python
if key == ord("q"): # совпадает ли с символом `q`.
    pass
```

Функция `ord()` возвращает целое число, представляющее Unicode символ.

Некоторые полезные ASCII-коды клавиш:
|  |  |
|--|--|
| 27 | Escape |
| 32 | Space |
| 13 | Enter |